<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/styles/style0.css" />
    <link rel="stylesheet" href="/styles/knob.css" />
    <title id="page-title">home</title>
  </head>
  <body>
    <div class="layout0">
      <div id="navBar">
        <div id="slider-container">
          <div class="navProject"></div>
          <div class="navProject"></div>
          <div class="navProject"></div>
          <div class="navProject"></div>
          <div class="navProject"></div>
          <div class="navProject"></div>
          <div class="navProject"></div>
          <div class="navProject"></div>
          <div class="navProject"></div>
          <div class="navProject"></div>
        </div>
        <div id="social-container">
          <div class="socialIcon" target="_blank">f</div>
          <div class="socialIcon" target="_blank">i</div>
          <div class="socialIcon" target="_blank">t</div>
        </div>
      </div>
      <div onClick="selectProject()" id="projectContent">
        <div id="projectBackC">
          <p>826 super real store</p>
        </div>
        <div id="projectFrontC">
          <div id="thumbnail">
            <img src="/assets/diaImg.png" alt="diaImg" />
          </div>
        </div>
      </div>
      <div id="knobBar">
        <div class="knob-container">
          <div class="knob"></div>
          <div class="knob-display">0.0</div>
        </div>
        <div class="knob-container">
          <div class="knob"></div>
          <div class="knob-display">0.0</div>
        </div>
        <div class="knob-container">
          <div class="knob"></div>
          <div class="knob-display">0.0</div>
        </div>
        <div class="knob-container">
          <div class="knob"></div>
          <div class="knob-display">0.0</div>
        </div>
      </div>
      <div id="logo">
        <img src="/assets/hellologo.png" alt="hello logo" />
      </div>
    </div>
    <!-- <div class="knob-container"> -->
    <!-- <div id="knob" class="knob"></div> -->
    <!-- <div id="knob-display">0.0</div> -->
    <!-- </div> -->
    <script src="js/Knob.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>

<script>
  let projectContent;

  function selectProject() {
    resizeClip();
    // shrinkKnobBar();
    toggleScrollBehavior(projectContent);
    console.log("click");
  }

  window.addEventListener("load", () => {
    projectContent = document.querySelector("#projectContent");
    resizeTextToFit();
    console.log("load");
  });

  window.addEventListener("resize", () => {
    resizeTextToFit();
    console.log("resize");
  });
  window.addEventListener("wheel", () => {
    console.log("scroll");
  });
</script>

<script>
  function toggleScrollBehavior(pc) {
    const projectContentRef = window.getComputedStyle(pc);
    projectContent.style.overflowY =
      projectContent.style.overflowY === "scroll" ? "hidden" : "scroll";
  }

  function resizeTextToFit() {
    const paragraphs = document.querySelectorAll("#projectBackC p");
    const p = paragraphs[0];
    let fontSize = 200;
    p.style.fontSize = fontSize + "px";
    while (p.scrollWidth > p.clientWidth) {
      fontSize--;
      p.style.fontSize = fontSize + "px";
    }
  }

  function resizeClip() {
    const paragraphs = document.querySelectorAll("#projectBackC p");
    const p = paragraphs[0];
    const fontSizeRef = p.style.fontSize;
    const topPaddingRef = window.getComputedStyle(
      document.querySelector("#projectBackC")
    ).paddingTop;
    const clipPathValue = `rect(calc(calc(${fontSizeRef} + ${topPaddingRef}) + 5%) 0 95% 100% round 5vw)`;
    const elementToClip = document.querySelector("#thumbnail img");
    elementToClip.style.clipPath = clipPathValue;
  }

  function shrinkKnobBar() {
    console.log("shrinkKnobBar");
    const knobBar = document.querySelector("#knobBar");
    knobBar.style.width = "10px";
  }

  function barToBack() {
    console.log("barToBack");
  }
</script>

<!-- 
next thing to do should be to write out the possible states in figma,
how to organize the functions to best support them.
-->
